import{a as k,i as p,j as e,b as g,H as T,c as E,S as R,d as H,D as M,e as C,u as v,f as w,h as L,k as V,l as A,m as O}from"./index-BmTDuvZb.js";import{L as U}from"./Logo-IF-9I2F4.js";import{M as N}from"./index-B2aNPlXf.js";import{S as I}from"./NavToggle-D2pRtnEa.js";import{u as $,N as P,A as F,n as K,a as Y,b as B,H as G,U as W,M as q}from"./UserProfileDropdown-QWBsFMBw.js";import{V as z}from"./VerticalMenuContent-wGl2CNDo.js";import{H as J,a as Q}from"./CloseButton-DJjxVEoc.js";import{u as _}from"./useResponsive-DPdpSkN9.js";import{N as X,S as Z}from"./Notification-Pvi2oGrr.js";import{S as ee}from"./SidePanel-y-Bc4QL1.js";import{L as te}from"./LayoutBase-DPBLMZIK.js";import"./index-BADhTaSU.js";import"./Drawer-DzqlIjEr.js";import"./isNil-pXqcj5Hj.js";import"./classNames-1IIsPMBF.js";import"./index-D_KHXJS9.js";import"./withHeaderItem-BAwxuNZy.js";import"./journalistService-BGxq9KBK.js";import"./apiService-CUP-TZv2.js";import"./Button-DurQkwM5.js";import"./Dialog-DLr3sM2V.js";import"./debounce-BDIv-DRu.js";import"./Badge-CndVQ9ZH.js";import"./index-Kv-3TB7K.js";import"./Notification-tU2EwgzP.js";import"./StatusIcon-DsewrCSG.js";import"./toast-GyZEIVmG.js";const se=n=>{const{onChange:a,routeKey:s,activeKeys:o,onSetActiveKey:c,direction:d,navigationTree:i,userAuthority:l,mode:m,selectedMenu:u,t:x,...y}=n,{includedRouteTree:r}=$(i,s),f=({key:t,title:h,menu:D,translateKey:b})=>{a({title:h,menu:D,translateKey:b}),c([t])},S=({key:t})=>{a({}),c([t])};k.useEffect(()=>{r.type!==P&&!p(r)&&a({key:r.key,title:r.title,menu:r.subMenu,translateKey:r.translateKey})},[r.key]);const j=o&&o.length>0?o:p(u)?[]:[r.key];return e.jsxs("div",{...y,children:[e.jsx(g,{to:E.authenticatedEntryPath,className:"stacked-mini-nav-header flex items-center justify-center",style:{height:T},children:e.jsx(U,{imgClass:"max-h-10",mode:m,type:"streamline",className:R})}),e.jsx(I,{autoHide:!0,direction:d,children:e.jsx(N,{className:"px-4 pb-4",defaultActiveKeys:j,children:i.map(t=>e.jsx(F,{authority:t.authority,userAuthority:l,children:e.jsx("div",{title:x(t.translateKey,t.title),children:t.subMenu&&t.subMenu.length>0?e.jsx(N.MenuItem,{eventKey:t.key,className:"mb-2",onSelect:()=>f({key:t.key,title:t.title,menu:t.subMenu,translateKey:t.translateKey}),children:e.jsx("div",{className:"text-2xl",children:K[t.icon]})}):e.jsx(g,{to:t.path,className:"flex items-center h-full w-full",onClick:()=>S({key:t.key}),children:e.jsx(N.MenuItem,{eventKey:t.key,className:"mb-2",children:e.jsx("div",{className:"text-2xl",children:K[t.icon]})})})})},t.key))})})]})},ae=n=>{const{className:a,title:s,menu:o,routeKey:c,onCollapse:d,direction:i,translationSetup:l,userAuthority:m,...u}=n,x=()=>{d()};return e.jsxs("div",{className:H("h-full",a),...u,children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:T},children:[e.jsx("h5",{className:"font-bold",children:s}),e.jsxs("button",{type:"button",className:"close-button",onClick:x,children:[i===M&&e.jsx(J,{}),i===C&&e.jsx(Q,{})]})]}),e.jsx(I,{autoHide:!0,direction:i,children:e.jsx(z,{routeKey:c,navigationTree:o,translationSetup:l,userAuthority:m})})]})},ie={width:V},re=({translationSetup:n=E.activeNavTranslation})=>{const{t:a}=Y(!n),[s,o]=k.useState({}),[c,d]=k.useState([]),i=v(t=>t.mode),l=v(t=>t.direction),m=w(t=>t.currentRouteKey),u=L(t=>t.user.authority),{larger:x}=_(),y=(t,h)=>`${t}-${h}`,r=t=>{o(t)},f=()=>{o({}),d([])},S=t=>{d(t)},j=()=>{let t={};const h=`${-A}px`;return l===M&&(t={marginLeft:h}),l===C&&(t={marginRight:h}),t};return e.jsx(e.Fragment,{children:x.md&&e.jsxs("div",{className:"stacked-side-nav",children:[e.jsx(se,{className:`stacked-side-nav-mini ${y("stacked-side-nav-mini",i)}`,style:ie,routeKey:m,activeKeys:c,mode:i,direction:l,navigationTree:B,userAuthority:u||[],selectedMenu:s,t:a,onChange:r,onSetActiveKey:S}),e.jsx("div",{className:`stacked-side-nav-secondary ${y("stacked-side-nav-secondary",i)}`,style:{width:A,...p(s)?j():{}},children:!p(s)&&e.jsx(ae,{title:a(s.translateKey,s.title),menu:s.menu,routeKey:m,direction:l,translationSetup:n,userAuthority:u||[],onCollapse:f})})]})})},be=({children:n})=>{const{larger:a,smaller:s}=_();return e.jsx(te,{type:O,className:"app-layout-stacked-side flex flex-auto flex-col",children:e.jsxs("div",{className:"flex flex-auto min-w-0",children:[a.lg&&e.jsx(re,{}),e.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[e.jsx(G,{className:"shadow dark:shadow-2xl",headerStart:e.jsxs(e.Fragment,{children:[s.lg&&e.jsx(q,{}),e.jsx(Z,{})]}),headerEnd:e.jsxs(e.Fragment,{children:[e.jsx(X,{}),e.jsx(ee,{}),e.jsx(W,{hoverable:!1})]})}),e.jsx("div",{className:"h-full flex flex-auto flex-col",children:n})]})]})})};export{be as default};
