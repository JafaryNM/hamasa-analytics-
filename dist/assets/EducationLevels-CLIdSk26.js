import{Y as W,a as x,j as e,a9 as G}from"./index-BmTDuvZb.js";import{T as k}from"./index-BADhTaSU.js";import{i as J,j as P,k as Q,l as X}from"./Drawer-DzqlIjEr.js";import{u as Z}from"./useData-BOaL--7C.js";import{A as $}from"./AdaptiveCard-CrXiXQ44.js";import{N as u}from"./Notification-tU2EwgzP.js";import{t as h}from"./toast-GyZEIVmG.js";import{h as ee}from"./moment-BLMuvzoS.js";import{I as ae}from"./FormContainer-DAIJ54eo.js";import"./index-DiLTFOK_.js";import{C as te}from"./ConfirmDialog-teBenfrx.js";import"./FileItem-DzXY3F8e.js";import{B as f}from"./Button-DurQkwM5.js";import{D as re}from"./DebouceInput-CO8iQz0e.js";import"./debounce-BDIv-DRu.js";import"./Badge-CndVQ9ZH.js";import{D as oe}from"./Dialog-DLr3sM2V.js";import{o as se,s as ne,u as le,t as ie,F as de,a as ce,C as me}from"./types-CS3IvESl.js";import"./index-Kv-3TB7K.js";import"./index-B2aNPlXf.js";import"./index-Dp3eu27c.js";import{e as j}from"./educationLevelService-CloD3Z5k.js";import{R as C,C as g}from"./row-BhmCD8Yc.js";import{F as pe,P as ue}from"./Table-D5q3gGnO.js";import"./isNil-pXqcj5Hj.js";import"./CloseButton-DJjxVEoc.js";import"./classNames-1IIsPMBF.js";import"./index-D_KHXJS9.js";import"./Card-BgjqMMuG.js";import"./StatusIcon-DsewrCSG.js";import"./apiService-CUP-TZv2.js";import"./context-Du5Tb9SW.js";import"./toConsumableArray-BwQuJZQe.js";import"./useBreakpoint-B4e-Cr1A.js";import"./extendsObject-BwUYxLSG.js";import"./index-D8WFQQX-.js";import"./Compact-BRfsaHnR.js";import"./AntdIcon-Bbd_N7Ky.js";import"./omit-B089rQxj.js";import"./EllipsisOutlined-BvS74-YI.js";import"./getAllowClear-TCr_opQ2.js";import"./useVariants-D5R8gtcG.js";const he=()=>Z("/education-levels"),ge=se({name:ne().trim().min(1,"Name of education level is required")}),oa=()=>{var N,D;const{signOut:T}=W(),{data:F,total:m,isLoading:R,pagination:r,setPagination:i,authenticated:B}=he(),[E,A]=x.useState(""),[t,s]=x.useState({record:null,isCreate:!0,loading:!1,showModal:!1}),[n,d]=x.useState({record:null,loading:!1,showModal:!1}),{control:L,reset:p,handleSubmit:I,formState:{errors:w}}=le({resolver:ie(ge)}),y=()=>{p({name:""})},Y=()=>{y(),s({...t,record:null,isCreate:!0,showModal:!0})},z=()=>{y(),s({...t,record:null,isCreate:!0,showModal:!1})},O=a=>{p({name:a.name}),s({...t,record:a,isCreate:!1,showModal:!0})},K=a=>{if(s({...t,loading:!0}),t.isCreate)j.create(a).then(o=>{p(),s({record:null,loading:!1,isCreate:!0,showModal:!1}),i({...r,page:1}),h.push(e.jsx(u,{title:"Success",type:"success",children:"Record has been created successfully"}))}).catch(o=>{var l,c;h.push(e.jsx(u,{title:"Failed",type:"danger",children:((c=(l=o.response)==null?void 0:l.data)==null?void 0:c.message)||"Something went wrong, try again"})),s({...t,loading:!1})});else{const o={...a,uuid:t.record!=null?t.record.uuid:""};j.update(o).then(l=>{p(),s({record:null,loading:!1,isCreate:!0,showModal:!1}),i({...r,page:1}),h.push(e.jsx(u,{title:"Success",type:"success",children:"Record has been updated successfully"}))}).catch(l=>{var c,M;h.push(e.jsx(u,{title:"Failed",type:"danger",children:((M=(c=l.response)==null?void 0:c.data)==null?void 0:M.message)||"Something went wrong, try again"})),s({...t,loading:!1})})}},U=()=>{var a;d({...n,loading:!0}),j.delete(((a=n.record)==null?void 0:a.uuid)??"").then(o=>{d({record:null,loading:!1,showModal:!1}),i({...r,page:1})}).catch(o=>{d({...n,loading:!1})})};B||T();const v=()=>{d({...n,record:null,showModal:!1})},_=a=>{d({...n,record:a,showModal:!0})},b=()=>r.perPage*(r.page-1),q=()=>{let a=b()+r.perPage;return m<a&&(a=m),a},H=a=>{i({...r,page:a})},S=()=>{i({...r,page:1,search:E})},V=[{title:"S/n",dataIndex:"s_no",key:"s_no",render:(a,o,l)=>(r.page-1)*r.perPage+l+1},{title:"Name",dataIndex:"name",key:"name"},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:a=>ee(a).format("DD MMM YYYY")},{title:"Action",dataIndex:"action",key:"action",render:(a,o)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx(k,{wrapperClass:"flex",title:"View",children:e.jsx("span",{className:"cursor-pointer p-2 text-warning",onClick:()=>O(o),children:e.jsx(Q,{size:20})})}),e.jsx(k,{wrapperClass:"flex",title:"Delete",children:e.jsx("span",{className:"cursor-pointer p-2 text-red-500 hover:text-red-500",onClick:()=>_(o),children:e.jsx(X,{size:20})})})]})}];return e.jsx(G,{children:e.jsx($,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h3",{children:"Education Levels"}),e.jsx(f,{variant:"solid",icon:e.jsx(J,{className:"text-xl"}),onClick:Y,children:"Add new"})]}),e.jsx(C,{className:"mt-5",children:e.jsx(g,{span:24,children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[e.jsx(re,{placeholder:"Search",suffix:e.jsx(P,{className:"text-lg"}),onChange:a=>A(a.target.value),onKeyDown:a=>a.key==="Enter"&&S()}),e.jsx(f,{icon:e.jsx(P,{}),onClick:()=>S(),children:"Search"})]})})}),e.jsx(C,{className:"mt-5",children:e.jsx(g,{span:24,children:e.jsx(pe,{dataSource:F,columns:V,rowKey:"uuid",loading:R,pagination:!1})})}),e.jsxs(C,{className:"mt-4",children:[e.jsx(g,{sm:24,md:12,children:e.jsxs("p",{className:"category",children:["Showing ",b()+1," to ",q()," of ",m," ","entries"]})}),e.jsx(g,{sm:24,md:12,children:e.jsx(ue,{align:"end",current:r.page,total:m,pageSize:r.perPage,onChange:H})})]}),e.jsxs(oe,{isOpen:t.showModal,onClose:z,children:[e.jsx("h4",{className:"mb-4 text-center",children:t.isCreate?"Create Education Level":"Update Education Level"}),e.jsxs(de,{onSubmit:I(K),children:[e.jsx(ce,{label:"Name",invalid:!!w.name,errorMessage:(N=w.name)==null?void 0:N.message,children:e.jsx(me,{name:"name",control:L,render:({field:a})=>e.jsx(ae,{type:"text",placeholder:"Name",autoComplete:"off",...a})})}),e.jsx(f,{loading:t.loading,variant:"solid",type:"submit",children:t.isCreate?"Create":"Update"})]})]}),e.jsx(te,{isOpen:n.showModal,type:"danger",title:"Warning",confirmText:"Delete",cancelButtonProps:{variant:"solid",color:"default",customColorClass:()=>"text-dark bg-gray-200 hover:bg-default mr-3"},confirmButtonProps:{variant:"solid",color:"danger",customColorClass:()=>"text-white bg-error hover:bg-error",loading:n.loading},onClose:v,onCancel:v,onConfirm:U,children:e.jsxs("p",{children:[" ","This action is irreversible! Deleting"," ",e.jsxs("span",{className:"font-semibold",children:[(D=n.record)==null?void 0:D.name," "]}),"will permanently remove it from the system. Are you sure you want to proceed?"]})})]})})})};export{oa as default};
