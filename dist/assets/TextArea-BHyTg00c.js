import{a as i,t as D,aa as A}from"./index-BmTDuvZb.js";import{_ as we,a as W,d as _e,b as B,e as ze,c as he,j as Pe}from"./toConsumableArray-BwQuJZQe.js";import{u as Fe,B as je,r as be,i as He,f as Le,t as Be,c as We,e as Ke,a as Ye,b as Ze}from"./getAllowClear-TCr_opQ2.js";import{n as Re,s as Ce,R as qe,w as ye,g as Ge,m as Xe,h as Ue,D as Je,B as Qe,A as ke,j as et}from"./context-Du5Tb9SW.js";import{u as tt}from"./useVariants-D5R8gtcG.js";import{u as at}from"./Compact-BRfsaHnR.js";var nt=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,rt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],ve={},C;function ot(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(n&&ve[a])return ve[a];var t=window.getComputedStyle(e),d=t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),m=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),s=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),p=rt.map(function(c){return"".concat(c,":").concat(t.getPropertyValue(c))}).join(";"),h={sizingStyle:p,paddingSize:m,borderSize:s,boxSizing:d};return n&&a&&(ve[a]=h),h}function it(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;C||(C=document.createElement("textarea"),C.setAttribute("tab-index","-1"),C.setAttribute("aria-hidden","true"),C.setAttribute("name","hiddenTextarea"),document.body.appendChild(C)),e.getAttribute("wrap")?C.setAttribute("wrap",e.getAttribute("wrap")):C.removeAttribute("wrap");var d=ot(e,n),m=d.paddingSize,s=d.borderSize,p=d.boxSizing,h=d.sizingStyle;C.setAttribute("style","".concat(h,";").concat(nt)),C.value=e.value||e.placeholder||"";var c=void 0,v=void 0,y,S=C.scrollHeight;if(p==="border-box"?S+=s:p==="content-box"&&(S-=m),a!==null||t!==null){C.value=" ";var T=C.scrollHeight-m;a!==null&&(c=T*a,p==="border-box"&&(c=c+m+s),S=Math.max(c,S)),t!==null&&(v=T*t,p==="border-box"&&(v=v+m+s),y=S>v?"":"hidden",S=Math.min(v,S))}var g={height:S,overflowY:y,resize:"none"};return c&&(g.minHeight=c),v&&(g.maxHeight=v),g}var st=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],pe=0,ge=1,xe=2,lt=i.forwardRef(function(e,n){var a=e,t=a.prefixCls,d=a.defaultValue,m=a.value,s=a.autoSize,p=a.onResize,h=a.className,c=a.style,v=a.disabled,y=a.onChange;a.onInternalAutoSize;var S=we(a,st),T=Re(d,{value:m,postState:function(b){return b??""}}),g=W(T,2),M=g[0],K=g[1],Y=function(b){K(b.target.value),y==null||y(b)},I=i.useRef();i.useImperativeHandle(n,function(){return{textArea:I.current}});var _=i.useMemo(function(){return s&&_e(s)==="object"?[s.minRows,s.maxRows]:[]},[s]),Z=W(_,2),x=Z[0],z=Z[1],O=!!s,k=i.useState(xe),P=W(k,2),R=P[0],F=P[1],q=i.useState(),G=W(q,2),ee=G[0],X=G[1],j=function(){F(pe)};Ce(function(){O&&j()},[m,x,z,O]),Ce(function(){if(R===pe)F(ge);else if(R===ge){var w=it(I.current,!1,x,z);F(xe),X(w)}},[R]);var E=i.useRef(),o=function(){ye.cancel(E.current)},U=function(b){R===xe&&(p==null||p(b),s&&(o(),E.current=ye(function(){j()})))};i.useEffect(function(){return o},[]);var J=O?ee:null,H=B(B({},c),J);return(R===pe||R===ge)&&(H.overflowY="hidden",H.overflowX="hidden"),i.createElement(qe,{onResize:U,disabled:!(s||p)},i.createElement("textarea",ze({},S,{ref:I,style:H,className:D(t,h,he({},"".concat(t,"-disabled"),v)),disabled:v,value:M,onChange:Y})))}),ut=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],dt=A.forwardRef(function(e,n){var a,t=e.defaultValue,d=e.value,m=e.onFocus,s=e.onBlur,p=e.onChange,h=e.allowClear,c=e.maxLength,v=e.onCompositionStart,y=e.onCompositionEnd,S=e.suffix,T=e.prefixCls,g=T===void 0?"rc-textarea":T,M=e.showCount,K=e.count,Y=e.className,I=e.style,_=e.disabled,Z=e.hidden,x=e.classNames,z=e.styles,O=e.onResize,k=e.onClear,P=e.onPressEnter,R=e.readOnly,F=e.autoSize,q=e.onKeyDown,G=we(e,ut),ee=Re(t,{value:d,defaultValue:t}),X=W(ee,2),j=X[0],E=X[1],o=j==null?"":String(j),U=A.useState(!1),J=W(U,2),H=J[0],w=J[1],b=A.useRef(!1),ue=A.useState(null),oe=W(ue,2),Q=oe[0],de=oe[1],ie=i.useRef(null),te=i.useRef(null),$=function(){var r;return(r=te.current)===null||r===void 0?void 0:r.textArea},ae=function(){$().focus()};i.useImperativeHandle(n,function(){var f;return{resizableTextArea:te.current,focus:ae,blur:function(){$().blur()},nativeElement:((f=ie.current)===null||f===void 0?void 0:f.nativeElement)||$()}}),i.useEffect(function(){w(function(f){return!_&&f})},[_]);var ce=A.useState(null),se=W(ce,2),ne=se[0],fe=se[1];A.useEffect(function(){if(ne){var f;(f=$()).setSelectionRange.apply(f,Pe(ne))}},[ne]);var u=Fe(K,M),l=(a=u.max)!==null&&a!==void 0?a:c,V=Number(l)>0,N=u.strategy(o),Ee=!!l&&N>l,Se=function(r,L){var le=L;!b.current&&u.exceedFormatter&&u.max&&u.strategy(L)>u.max&&(le=u.exceedFormatter(L,{max:u.max}),L!==le&&fe([$().selectionStart||0,$().selectionEnd||0])),E(le),be(r.currentTarget,r,p,le)},$e=function(r){b.current=!0,v==null||v(r)},Ae=function(r){b.current=!1,Se(r,r.currentTarget.value),y==null||y(r)},Ie=function(r){Se(r,r.target.value)},Ne=function(r){r.key==="Enter"&&P&&P(r),q==null||q(r)},Te=function(r){w(!0),m==null||m(r)},Oe=function(r){w(!1),s==null||s(r)},Ve=function(r){E(""),ae(),be($(),r,p)},me=S,re;u.show&&(u.showFormatter?re=u.showFormatter({value:o,count:N,maxLength:l}):re="".concat(N).concat(V?" / ".concat(l):""),me=A.createElement(A.Fragment,null,me,A.createElement("span",{className:D("".concat(g,"-data-count"),x==null?void 0:x.count),style:z==null?void 0:z.count},re)));var De=function(r){var L;O==null||O(r),(L=$())!==null&&L!==void 0&&L.style.height&&de(!0)},Me=!F&&!M&&!h;return A.createElement(je,{ref:ie,value:o,allowClear:h,handleReset:Ve,suffix:me,prefixCls:g,classNames:B(B({},x),{},{affixWrapper:D(x==null?void 0:x.affixWrapper,he(he({},"".concat(g,"-show-count"),M),"".concat(g,"-textarea-allow-clear"),h))}),disabled:_,focused:H,className:D(Y,Ee&&"".concat(g,"-out-of-range")),style:B(B({},I),Q&&!Me?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof re=="string"?re:void 0}},hidden:Z,readOnly:R,onClear:k},A.createElement(lt,ze({},G,{autoSize:F,maxLength:c,onKeyDown:Ne,onChange:Ie,onFocus:Te,onBlur:Oe,onCompositionStart:$e,onCompositionEnd:Ae,className:D(x==null?void 0:x.textarea),style:B(B({},z==null?void 0:z.textarea),{},{resize:I==null?void 0:I.resize}),disabled:_,prefixCls:g,onResize:De,ref:te,readOnly:R})))});const ct=e=>{const{componentCls:n,paddingLG:a}=e,t=`${n}-textarea`;return{[`textarea${n}`]:{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}`,resize:"vertical",[`&${n}-mouse-active`]:{transition:`all ${e.motionDurationSlow}, height 0s, width 0s`}},[`${n}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[t]:{position:"relative","&-show-count":{[`${n}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${n},
        &-affix-wrapper${t}-has-feedback ${n}
      `]:{paddingInlineEnd:a},[`&-affix-wrapper${n}-affix-wrapper`]:{padding:0,[`> textarea${n}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${n}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${n}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${t}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${n}-affix-wrapper-rtl`]:{[`${n}-suffix`]:{[`${n}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${n}-affix-wrapper-sm`]:{[`${n}-suffix`]:{[`${n}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},ft=Ge(["Input","TextArea"],e=>{const n=Xe(e,He(e));return[ct(n)]},Le,{resetFont:!1});var mt=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,t=Object.getOwnPropertySymbols(e);d<t.length;d++)n.indexOf(t[d])<0&&Object.prototype.propertyIsEnumerable.call(e,t[d])&&(a[t[d]]=e[t[d]]);return a};const bt=i.forwardRef((e,n)=>{var a;const{prefixCls:t,bordered:d=!0,size:m,disabled:s,status:p,allowClear:h,classNames:c,rootClassName:v,className:y,style:S,styles:T,variant:g,showCount:M,onMouseDown:K,onResize:Y}=e,I=mt(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:_,direction:Z,allowClear:x,autoComplete:z,className:O,style:k,classNames:P,styles:R}=Ue("textArea"),F=i.useContext(Je),q=s??F,{status:G,hasFeedback:ee,feedbackIcon:X}=i.useContext(Qe),j=Ze(G,p),E=i.useRef(null);i.useImperativeHandle(n,()=>{var u;return{resizableTextArea:(u=E.current)===null||u===void 0?void 0:u.resizableTextArea,focus:l=>{var V,N;Be((N=(V=E.current)===null||V===void 0?void 0:V.resizableTextArea)===null||N===void 0?void 0:N.textArea,l)},blur:()=>{var l;return(l=E.current)===null||l===void 0?void 0:l.blur()}}});const o=_("input",t),U=ke(o),[J,H,w]=We(o,v),[b]=ft(o,U),{compactSize:ue,compactItemClassnames:oe}=at(o,Z),Q=et(u=>{var l;return(l=m??ue)!==null&&l!==void 0?l:u}),[de,ie]=tt("textArea",g,d),te=Ke(h??x),[$,ae]=i.useState(!1),[ce,se]=i.useState(!1),ne=u=>{ae(!0),K==null||K(u);const l=()=>{ae(!1),document.removeEventListener("mouseup",l)};document.addEventListener("mouseup",l)},fe=u=>{var l,V;if(Y==null||Y(u),$&&typeof getComputedStyle=="function"){const N=(V=(l=E.current)===null||l===void 0?void 0:l.nativeElement)===null||V===void 0?void 0:V.querySelector("textarea");N&&getComputedStyle(N).resize==="both"&&se(!0)}};return J(b(i.createElement(dt,Object.assign({autoComplete:z},I,{style:Object.assign(Object.assign({},k),S),styles:Object.assign(Object.assign({},R),T),disabled:q,allowClear:te,className:D(w,U,y,v,oe,O,ce&&`${o}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},c),P),{textarea:D({[`${o}-sm`]:Q==="small",[`${o}-lg`]:Q==="large"},H,c==null?void 0:c.textarea,P.textarea,$&&`${o}-mouse-active`),variant:D({[`${o}-${de}`]:ie},Ye(o,j)),affixWrapper:D(`${o}-textarea-affix-wrapper`,{[`${o}-affix-wrapper-rtl`]:Z==="rtl",[`${o}-affix-wrapper-sm`]:Q==="small",[`${o}-affix-wrapper-lg`]:Q==="large",[`${o}-textarea-show-count`]:M||((a=e.count)===null||a===void 0?void 0:a.show)},H)}),prefixCls:o,suffix:ee&&i.createElement("span",{className:`${o}-textarea-suffix`},X),showCount:M,ref:E,onResize:fe,onMouseDown:ne}))))});export{bt as T};
