import{a as c,y as p,j as e,a6 as f}from"./index-BmTDuvZb.js";import{A as x}from"./Alert--W8fVvZR.js";import{B as g}from"./Button-DurQkwM5.js";import{A as v}from"./ActionLink-BTka9GBU.js";import{I as y}from"./FormContainer-DAIJ54eo.js";import{u as S,F,a as N,C as P,t as w,o as C,s as k}from"./types-CS3IvESl.js";import{u as A}from"./useTimeOutMessage-BrPhzz9b.js";import"./classNames-1IIsPMBF.js";import"./StatusIcon-DsewrCSG.js";import"./CloseButton-DJjxVEoc.js";import"./isNil-pXqcj5Hj.js";const T=C({phone:k().min(10,"Phone number must be at least 10 digits").max(15,"Phone number cannot exceed 15 digits").regex(/^\d+$/,"Only numeric phone numbers are allowed")}),B=()=>{var d;const[t,s]=c.useState(!1),[o,r]=c.useState(null),i=p(),{handleSubmit:m,formState:{errors:a},control:j}=S({resolver:w(T)}),b=async n=>{s(!0),r(null),await f.forgotPassword({username:n.phone}).then(l=>{l.data.success&&i("/reset-password",{state:{phone:n.phone}}),s(!1)}).catch(l=>{var h,u;s(!1),r(((u=(h=l.response)==null?void 0:h.data)==null?void 0:u.message)||"An error occurred. Try again.")})};return e.jsxs("div",{className:"mx-auto mt-6",children:[e.jsx("h2",{className:"text-left text-lg font-semibold",children:"Forgot Password"}),o&&e.jsx("div",{className:"mb-4",children:e.jsx(x,{type:"danger",children:o})}),e.jsxs(F,{onSubmit:m(b),children:[e.jsx(N,{label:"Phone Number",invalid:!!a.phone,errorMessage:(d=a.phone)==null?void 0:d.message,children:e.jsx(P,{name:"phone",control:j,render:({field:n})=>e.jsx(y,{type:"tel",placeholder:"Enter your phone number",...n})})}),e.jsx(g,{loading:t,variant:"solid",type:"submit",children:t?"Sending OTP...":"Send OTP"})]})]})},E=({signInUrl:t="/sign-in"})=>{const[s,o]=c.useState(!1),[r,i]=A(),m=p(),a=()=>{m(t)};return e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:s?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-2",children:"Check your phone number"}),e.jsx("p",{className:"font-semibold heading-text",children:"We have sent a otp  recovery to your phone number"})]}):e.jsx(e.Fragment,{})}),r&&e.jsx(x,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx("span",{className:"break-all",children:r})}),e.jsx(B,{emailSent:s,setMessage:i,setEmailSent:o,children:e.jsx(g,{block:!0,variant:"solid",type:"button",onClick:a,children:"Continue"})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{children:"Back to "}),e.jsx(v,{to:t,className:"heading-text font-bold",themeColor:!1,children:"Sign in"})]})]})},H=()=>e.jsx(E,{});export{E as ForgotPasswordBase,H as default};
