import{Y as V,y as q,a as g,j as e,a9 as J}from"./index-BmTDuvZb.js";import{T as Q}from"./index-BADhTaSU.js";import{i as W,j as F,m as X}from"./Drawer-DzqlIjEr.js";import{u as Z}from"./useData-BOaL--7C.js";import{A as ee}from"./AdaptiveCard-CrXiXQ44.js";import{N as I}from"./Notification-tU2EwgzP.js";import{t as B}from"./toast-GyZEIVmG.js";import{h as ae}from"./moment-BLMuvzoS.js";import{I as u}from"./FormContainer-DAIJ54eo.js";import"./index-DiLTFOK_.js";import{B as f}from"./Button-DurQkwM5.js";import{D as re}from"./Dialog-DLr3sM2V.js";import"./FileItem-DzXY3F8e.js";import{S as te}from"./Select-BSoHUsjb.js";import{D as se}from"./DebouceInput-CO8iQz0e.js";import"./debounce-BDIv-DRu.js";import"./Badge-CndVQ9ZH.js";import{u as oe,t as ne,F as le,a as d,C as m}from"./types-CS3IvESl.js";import"./index-Kv-3TB7K.js";import"./index-B2aNPlXf.js";import"./index-Dp3eu27c.js";import{T as P}from"./Tag-CnLXc3pt.js";import{A as ie}from"./AdminSchema-BVavU2lW.js";import{u as de}from"./userService-fbSkJ2gC.js";import{a as me}from"./authUserService-CytpygUE.js";import{R as j,C as h}from"./row-BhmCD8Yc.js";import{F as ce,P as pe}from"./Table-D5q3gGnO.js";import"./isNil-pXqcj5Hj.js";import"./CloseButton-DJjxVEoc.js";import"./classNames-1IIsPMBF.js";import"./index-D_KHXJS9.js";import"./Card-BgjqMMuG.js";import"./StatusIcon-DsewrCSG.js";import"./toConsumableArray-BwQuJZQe.js";import"./apiService-CUP-TZv2.js";import"./context-Du5Tb9SW.js";import"./useBreakpoint-B4e-Cr1A.js";import"./extendsObject-BwUYxLSG.js";import"./index-D8WFQQX-.js";import"./Compact-BRfsaHnR.js";import"./AntdIcon-Bbd_N7Ky.js";import"./omit-B089rQxj.js";import"./EllipsisOutlined-BvS74-YI.js";import"./getAllowClear-TCr_opQ2.js";import"./useVariants-D5R8gtcG.js";const ue=()=>Z("/users/admins"),he=[{label:"Male",value:"Male"},{label:"Female",value:"Female"}],ia=()=>{var y,v,w,S,A;const{signOut:D}=V(),R=q(),{data:T,total:c,isLoading:E,pagination:t,setPagination:p,authenticated:Y}=ue(),[L,G]=g.useState(""),[r,n]=g.useState({record:null,isCreate:!0,loading:!1,showModal:!1}),[xe,ge]=g.useState({record:null,loading:!1,showModal:!1}),{control:i,reset:x,handleSubmit:$,formState:{errors:s}}=oe({resolver:ne(ie)}),N=()=>{x({firstName:"",lastName:"",gender:{},email:"",phone:""})},z=()=>{N(),n({...r,record:null,isCreate:!0,showModal:!0})},K=()=>{N(),n({...r,record:null,isCreate:!0,showModal:!1})},O=a=>{if(n({...r,loading:!0}),r.isCreate){const o={...a,gender:a.gender.value,password:"12345678",passwordConfirmation:"12345678"};me.create(o,"/register/admin").then(l=>{x(),n({record:null,loading:!1,isCreate:!0,showModal:!1}),p({...t,page:1}),B.push(e.jsx(I,{title:"Success",type:"success",children:"Admin has been created successfully"}))}).catch(l=>{var k,M;B.push(e.jsx(I,{title:"Failed",type:"danger",children:((M=(k=l.response)==null?void 0:k.data)==null?void 0:M.message)||"Something went wrong, try again"})),n({...r,loading:!1})})}else{const o={...a,gender:a.gender.value,uuid:r.record!=null?r.record.uuid:""};de.update(o).then(l=>{x(),n({record:null,loading:!1,isCreate:!0,showModal:!1}),p({...t,page:1})}).catch(l=>{n({...r,loading:!1})})}};Y||D();const C=()=>t.perPage*(t.page-1),U=()=>{let a=C()+t.perPage;return c<a&&(a=c),a},_=a=>{p({...t,page:a})},b=()=>{p({...t,page:1,search:L})},H=[{title:"S/n",dataIndex:"s_no",key:"s_no",render:(a,o,l)=>(t.page-1)*t.perPage+l+1},{title:"Full Name",dataIndex:"fullName",key:"fullName",render:(a,o)=>`${o.firstName} ${o.lastName}`},{title:"Gender",dataIndex:"gender",key:"gender"},{title:"Email Address",dataIndex:"email",key:"email"},{title:"Phone Number",dataIndex:"phone",key:"phone"},{title:"Status",dataIndex:"isActive",key:"isActive",render:a=>a?e.jsx(P,{className:"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100 border-0 rounded",children:"Active"}):e.jsx(P,{className:"text-red-600 bg-red-100 dark:text-red-100 dark:bg-red-500/20 border-0",children:"Inactive"})},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:a=>ae(a).format("DD MMM YYYY")},{title:"Action",dataIndex:"action",key:"action",render:(a,o)=>e.jsx("div",{className:"flex gap-3",children:e.jsx(Q,{wrapperClass:"flex",title:"View",children:e.jsx("span",{className:"cursor-pointer p-2 text-primary",onClick:()=>R(`/user-management/admins/details/${o.uuid}`),children:e.jsx(X,{size:20})})})})}];return e.jsx(J,{children:e.jsx(ee,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h3",{children:"Admins"}),e.jsx(f,{variant:"solid",icon:e.jsx(W,{className:"text-xl"}),onClick:z,children:"Add new"})]}),e.jsx(j,{className:"mt-5",children:e.jsx(h,{span:24,children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[e.jsx(se,{placeholder:"Search",suffix:e.jsx(F,{className:"text-lg"}),onChange:a=>G(a.target.value),onKeyDown:a=>a.key==="Enter"&&b()}),e.jsx(f,{icon:e.jsx(F,{}),onClick:()=>b(),children:"Search"})]})})}),e.jsx(j,{className:"mt-5",children:e.jsx(h,{span:24,children:e.jsx(ce,{dataSource:T,columns:H,rowKey:"uuid",loading:E,pagination:!1})})}),e.jsxs(j,{className:"mt-4",children:[e.jsx(h,{sm:24,md:12,children:e.jsxs("p",{className:"category",children:["Showing ",C()+1," to ",U()," of ",c," ","entries"]})}),e.jsx(h,{sm:24,md:12,children:e.jsx(pe,{align:"end",current:t.page,total:c,pageSize:t.perPage,onChange:_})})]}),e.jsxs(re,{isOpen:r.showModal,onClose:K,children:[e.jsx("h4",{className:"mb-4 text-center",children:r.isCreate?"Create Admin":"Update Admin"}),e.jsxs(le,{onSubmit:$(O),children:[e.jsx(d,{label:"First Name",invalid:!!s.firstName,errorMessage:(y=s.firstName)==null?void 0:y.message,children:e.jsx(m,{name:"firstName",control:i,render:({field:a})=>e.jsx(u,{type:"text",placeholder:"First Name",autoComplete:"off",...a})})}),e.jsx(d,{label:"Last Name",invalid:!!s.lastName,errorMessage:(v=s.lastName)==null?void 0:v.message,children:e.jsx(m,{name:"lastName",control:i,render:({field:a})=>e.jsx(u,{type:"text",placeholder:"Last Name",autoComplete:"off",...a})})}),e.jsx(d,{label:"Gender",invalid:!!s.gender,errorMessage:(w=s.gender)==null?void 0:w.message,children:e.jsx(m,{name:"gender",control:i,render:({field:a})=>e.jsx(te,{placeholder:"Select Gender",options:he,...a})})}),e.jsx(d,{label:"Phone Number",invalid:!!s.phone,errorMessage:(S=s.phone)==null?void 0:S.message,children:e.jsx(m,{name:"phone",control:i,render:({field:a})=>e.jsx(u,{type:"text",placeholder:"Phone Number",autoComplete:"off",...a})})}),e.jsx(d,{label:"Email Address",invalid:!!s.email,errorMessage:(A=s.email)==null?void 0:A.message,children:e.jsx(m,{name:"email",control:i,render:({field:a})=>e.jsx(u,{type:"text",placeholder:"Email Address",autoComplete:"off",...a})})}),e.jsx(f,{loading:r.loading,variant:"solid",type:"submit",children:r.isCreate?"Create":"Update"})]})]})]})})})};export{ia as default};
