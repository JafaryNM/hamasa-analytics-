import{Y as G,y as Q,a as Y,j as a,a9 as W}from"./index-BmTDuvZb.js";import{T as B}from"./index-BADhTaSU.js";import{i as X,j as I,m as Z,w as ee}from"./Drawer-DzqlIjEr.js";import{u as ae}from"./useAwards-CUeIW1Ib.js";import{A as te}from"./AdaptiveCard-CrXiXQ44.js";import{h as r}from"./moment-BLMuvzoS.js";import{I as R}from"./FormContainer-DAIJ54eo.js";import"./index-DiLTFOK_.js";import{B as h}from"./Button-DurQkwM5.js";import{D as re}from"./Dialog-DLr3sM2V.js";import{a as u}from"./FileItem-DzXY3F8e.js";import{D as se}from"./DebouceInput-CO8iQz0e.js";import"./debounce-BDIv-DRu.js";import"./Badge-CndVQ9ZH.js";import{u as oe,t as ne,F as de,a as l,C as c}from"./types-CS3IvESl.js";import"./index-Kv-3TB7K.js";import"./index-B2aNPlXf.js";import"./index-Dp3eu27c.js";import{T as g}from"./Tag-CnLXc3pt.js";import"./toast-GyZEIVmG.js";import{A as ie}from"./AwardSchema-x7u3V8JJ.js";import{a as F}from"./awardService-Bn5RyqjY.js";import{R as M,C as x}from"./row-BhmCD8Yc.js";import{F as le,P as ce}from"./Table-D5q3gGnO.js";import"./isNil-pXqcj5Hj.js";import"./CloseButton-DJjxVEoc.js";import"./classNames-1IIsPMBF.js";import"./index-D_KHXJS9.js";import"./useData-BOaL--7C.js";import"./Card-BgjqMMuG.js";import"./apiService-CUP-TZv2.js";import"./context-Du5Tb9SW.js";import"./toConsumableArray-BwQuJZQe.js";import"./useBreakpoint-B4e-Cr1A.js";import"./extendsObject-BwUYxLSG.js";import"./index-D8WFQQX-.js";import"./Compact-BRfsaHnR.js";import"./AntdIcon-Bbd_N7Ky.js";import"./omit-B089rQxj.js";import"./EllipsisOutlined-BvS74-YI.js";import"./getAllowClear-TCr_opQ2.js";import"./useVariants-D5R8gtcG.js";const aa=()=>{var b,S,C,y,k,N,E;const{signOut:P}=G(),f=Q(),{data:T,total:D,isLoading:$,pagination:n,setPagination:p,authenticated:z}=ae(),[J,K]=Y.useState(""),[o,d]=Y.useState({record:null,isCreate:!0,loading:!1,showModal:!1}),[me,ue]=Y.useState({record:null,loading:!1,showModal:!1}),{control:i,reset:j,handleSubmit:L,formState:{errors:s}}=oe({resolver:ne(ie)}),v=()=>{j({title:"",description:"",startDate:void 0,endDate:void 0,judgeAccessStartDate:void 0,judgeAccessEndDate:void 0})},O=()=>{v(),d({...o,record:null,isCreate:!0,showModal:!0})},U=()=>{v(),d({...o,record:null,isCreate:!0,showModal:!1})},_=e=>{if(d({...o,loading:!0}),console.log(e),o.isCreate){const t={...e,startDate:r(e.startDate).format("YYYY-MM-DD"),endDate:r(e.endDate).format("YYYY-MM-DD"),judgeAccessStartDate:r(e.judgeAccessStartDate).format("YYYY-MM-DD"),judgeAccessEndDate:r(e.judgeAccessEndDate).format("YYYY-MM-DD"),resultsReleaseDate:r(e.resultsReleaseDate).format("YYYY-MM-DD")};F.create(t).then(m=>{j(),d({record:null,loading:!1,isCreate:!0,showModal:!1}),p({...n,page:1})}).catch(m=>{d({...o,loading:!1})})}else{const t={...e,startDate:r(e.startDate).format("YYYY-MM-DD"),endDate:r(e.endDate).format("YYYY-MM-DD"),judgeAccessStartDate:r(e.judgeAccessStartDate).format("YYYY-MM-DD"),judgeAccessEndDate:r(e.judgeAccessEndDate).format("YYYY-MM-DD"),uuid:o.record!=null?o.record.uuid:""};F.update(t).then(m=>{j(),d({record:null,loading:!1,isCreate:!0,showModal:!1}),p({...n,page:1})}).catch(m=>{d({...o,loading:!1})})}};z||P();const A=()=>n.perPage*(n.page-1),H=()=>{let e=A()+n.perPage;return D<e&&(e=D),e},V=e=>{p({...n,page:e})},w=()=>{p({...n,page:1,search:J})},q=[{title:"S/n",dataIndex:"s_no",key:"s_no",render:(e,t,m)=>(n.page-1)*n.perPage+m+1},{title:"Title",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"Duration",dataIndex:"startDate",key:"startDate",render:(e,t)=>`${r(t.startDate).format("DD MMM YYYY")} - ${r(t.endDate).format("DD MMM YYYY")}`},{title:"Judge Access",dataIndex:"judgeAccessStartDate",key:"judgeAccessStartDate",render:(e,t)=>`${r(t.judgeAccessStartDate).format("DD MMM YYYY")} - ${r(t.judgeAccessStartDate).format("DD MMM YYYY")}`},{title:"Result Date",dataIndex:"resultsReleaseDate",key:"resultsReleaseDate",render:(e,t)=>`${r(t.judgeAccessStartDate).format("DD MMM YYYY")} - ${r(t.judgeAccessStartDate).format("DD MMM YYYY")}`},{title:"Published",dataIndex:"isPublished",key:"isPublished",render:e=>e?a.jsx(g,{className:"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100 border-0 rounded",children:"Yes"}):a.jsx(g,{className:"text-gray-700 bg-gray-200 dark:text-gray-100 dark:bg-gray-500/20 border-0",children:"No"})},{title:"Status",dataIndex:"isActive",key:"isActive",render:e=>e?a.jsx(g,{className:"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100 border-0 rounded",children:"Active"}):a.jsx(g,{className:"text-red-600 bg-red-100 dark:text-red-100 dark:bg-red-500/20 border-0",children:"Inactive"})},{title:"Created",dataIndex:"createdAt",key:"created",render:e=>r(e).format("DD MMM YYYY")},{title:"Action",dataIndex:"action",key:"action",render:(e,t)=>a.jsxs("div",{className:"flex gap-3",children:[a.jsx(B,{wrapperClass:"flex",title:"View",children:a.jsx("span",{className:"cursor-pointer p-2 text-primary",onClick:()=>f(`/award-management/awards/details/${t.uuid}`),children:a.jsx(Z,{size:20})})}),a.jsx(B,{wrapperClass:"flex",title:"Evaluation",children:a.jsx("span",{className:"cursor-pointer p-2 text-warning",onClick:()=>f(`/award-management/awards/evaluations/${t.uuid}`),children:a.jsx(ee,{size:20})})})]})}];return a.jsx(W,{children:a.jsx(te,{children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[a.jsx("h3",{children:"Cohorts"}),a.jsx(h,{variant:"solid",icon:a.jsx(X,{className:"text-xl"}),onClick:O,children:"Add Cohort"})]}),a.jsx(M,{className:"mt-5",children:a.jsx(x,{span:24,children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[a.jsx(se,{placeholder:"Search",suffix:a.jsx(I,{className:"text-lg"}),onChange:e=>K(e.target.value),onKeyDown:e=>e.key==="Enter"&&w()}),a.jsx(h,{icon:a.jsx(I,{}),onClick:()=>w(),children:"Search"})]})})}),a.jsx(M,{className:"mt-5",children:a.jsx(x,{span:24,children:a.jsx(le,{dataSource:T,columns:q,rowKey:"uuid",loading:$,pagination:!1})})}),a.jsxs(M,{className:"mt-4",children:[a.jsx(x,{sm:24,md:12,children:a.jsxs("p",{className:"category",children:["Showing ",A()+1," to ",H()," of ",D," ","entries"]})}),a.jsx(x,{sm:24,md:12,children:a.jsx(ce,{align:"end",current:n.page,total:D,pageSize:n.perPage,onChange:V})})]}),a.jsxs(re,{isOpen:o.showModal,onClose:U,children:[a.jsx("h4",{className:"mb-4 text-center",children:o.isCreate?"Created Award":"Update Award"}),a.jsxs(de,{onSubmit:L(_),children:[a.jsx(l,{label:"Title",invalid:!!s.title,errorMessage:(b=s.title)==null?void 0:b.message,children:a.jsx(c,{name:"title",control:i,render:({field:e})=>a.jsx(R,{type:"text",placeholder:"Title",autoComplete:"off",...e})})}),a.jsx(l,{label:"Description ",invalid:!!s.description,errorMessage:(S=s.description)==null?void 0:S.message,children:a.jsx(c,{name:"description",control:i,render:({field:e})=>a.jsx(R,{rows:4,type:"text",placeholder:"Description ",autoComplete:"off",...e,textArea:!0})})}),a.jsx(l,{label:"Start Date",invalid:!!s.startDate,errorMessage:(C=s.startDate)==null?void 0:C.message,children:a.jsx(c,{name:"startDate",control:i,render:({field:e})=>a.jsx(u,{...e,inputFormat:"MMM, DD YYYY",value:e.value?new Date(e.value):void 0})})}),a.jsx(l,{label:"End Date",invalid:!!s.endDate,errorMessage:(y=s.endDate)==null?void 0:y.message,children:a.jsx(c,{name:"endDate",control:i,render:({field:e})=>a.jsx(u,{...e,inputFormat:"MMM, DD YYYY",value:e.value?new Date(e.value):void 0})})}),a.jsx(l,{label:"Judge Access Start Date",invalid:!!s.judgeAccessStartDate,errorMessage:(k=s.judgeAccessStartDate)==null?void 0:k.message,children:a.jsx(c,{name:"judgeAccessStartDate",control:i,render:({field:e})=>a.jsx(u,{...e,inputFormat:"MMM, DD YYYY",value:e.value?new Date(e.value):void 0})})}),a.jsx(l,{label:"Judge Access End Date",invalid:!!s.judgeAccessEndDate,errorMessage:(N=s.judgeAccessEndDate)==null?void 0:N.message,children:a.jsx(c,{name:"judgeAccessEndDate",control:i,render:({field:e})=>a.jsx(u,{...e,inputFormat:"MMM, DD YYYY",value:e.value?new Date(e.value):void 0})})}),a.jsx(l,{label:"Results Date",invalid:!!s.judgeAccessEndDate,errorMessage:(E=s.judgeAccessEndDate)==null?void 0:E.message,children:a.jsx(c,{name:"resultsReleaseDate",control:i,render:({field:e})=>a.jsx(u,{...e,inputFormat:"MMM, DD YYYY",value:e.value?new Date(e.value):void 0})})}),a.jsx(h,{loading:o.loading,variant:"solid",type:"submit",children:o.isCreate?"Create":"Update"})]})]})]})})})};export{aa as default};
