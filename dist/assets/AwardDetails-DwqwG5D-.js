import{y as he,a as u,j as e,ac as J,a9 as X,aQ as ge,aR as xe,i as fe}from"./index-BmTDuvZb.js";import{C as de}from"./Card-BgjqMMuG.js";import{a as ae,T as ce}from"./FileItem-DzXY3F8e.js";import{a as w}from"./awardService-Bn5RyqjY.js";import{B as Y}from"./Button-DurQkwM5.js";import{N as ne}from"./Notification-tU2EwgzP.js";import{t as ie}from"./toast-GyZEIVmG.js";import{C as _}from"./ConfirmDialog-teBenfrx.js";import{F as pe,O as je,G as we}from"./CloseButton-DJjxVEoc.js";import{h as R}from"./moment-BLMuvzoS.js";import{A as Ce}from"./AwardSchema-x7u3V8JJ.js";import{u as W,t as K,F as V,a as D,C as y,o as q,s as F}from"./types-CS3IvESl.js";import{I as O}from"./FormContainer-DAIJ54eo.js";import{T as $}from"./index-BADhTaSU.js";import"./Badge-CndVQ9ZH.js";import{D as H}from"./Dialog-DLr3sM2V.js";import{i as Z,k as ue,l as ee}from"./Drawer-DzqlIjEr.js";import"./index-Kv-3TB7K.js";import"./index-B2aNPlXf.js";import"./index-Dp3eu27c.js";import{T as oe}from"./Tag-CnLXc3pt.js";import"./index-DiLTFOK_.js";import"./debounce-BDIv-DRu.js";import{R as re,C as se}from"./row-BhmCD8Yc.js";import{F as te}from"./Table-D5q3gGnO.js";import"./isNil-pXqcj5Hj.js";import{S as le}from"./Select-BSoHUsjb.js";import{c as be}from"./categoryService-CTpkvy7r.js";import{c as ve}from"./criteriaService-BmWfB9h2.js";import{u as De}from"./userService-fbSkJ2gC.js";import"./classNames-1IIsPMBF.js";import"./apiService-CUP-TZv2.js";import"./StatusIcon-DsewrCSG.js";import"./index-D_KHXJS9.js";import"./context-Du5Tb9SW.js";import"./toConsumableArray-BwQuJZQe.js";import"./useBreakpoint-B4e-Cr1A.js";import"./extendsObject-BwUYxLSG.js";import"./index-D8WFQQX-.js";import"./Compact-BRfsaHnR.js";import"./AntdIcon-Bbd_N7Ky.js";import"./omit-B089rQxj.js";import"./EllipsisOutlined-BvS74-YI.js";import"./getAllowClear-TCr_opQ2.js";import"./useVariants-D5R8gtcG.js";const L=({title:g,value:t})=>e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold block",children:g}),g!="Status"&&e.jsx("p",{className:"heading-text font-bold",children:t}),g=="Status"||g=="Published"?t==!0?e.jsx(oe,{className:"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100 border-0 rounded mt-1",children:g=="Status"?"Active":"Yes"}):e.jsx(oe,{className:"text-red-600 bg-red-100 dark:text-red-100 dark:bg-red-500/20 border-0 mt-1",children:g=="Status"?"In-active":"No"}):""]}),ye=({uuid:g,data:t,reloadFunc:j})=>{var S,N,c,s,r,o,p;const k=he(),[C,i]=u.useState({record:null,isCreate:!0,loading:!1,showModal:!1}),[m,a]=u.useState({record:null,loading:!1,showModal:!1}),[n,l]=u.useState({loading:!1,showModal:!1}),[f,U]=u.useState(!1),{control:h,reset:b,handleSubmit:v,formState:{errors:x}}=W({resolver:K(Ce)}),T=()=>{i({...C,isCreate:!1,showModal:!1})},M=()=>{b({title:t==null?void 0:t.title,description:t==null?void 0:t.description,startDate:new Date((t==null?void 0:t.startDate)??""),endDate:new Date((t==null?void 0:t.endDate)??""),judgeAccessStartDate:new Date((t==null?void 0:t.judgeAccessStartDate)??""),judgeAccessEndDate:new Date((t==null?void 0:t.judgeAccessEndDate)??"")}),i({...C,record:t,isCreate:!1,showModal:!0})},B=d=>{i({...C,loading:!0});const z={...d,startDate:R(d.startDate).format("YYYY-MM-DD"),endDate:R(d.endDate).format("YYYY-MM-DD"),judgeAccessStartDate:R(d.judgeAccessStartDate).format("YYYY-MM-DD"),judgeAccessEndDate:R(d.judgeAccessEndDate).format("YYYY-MM-DD"),uuid:C.record!=null?C.record.uuid:""};w.update(z).then(me=>{b(),i({record:null,loading:!1,isCreate:!0,showModal:!1}),j()}).catch(me=>{i({...C,loading:!1})})},E=()=>{l({loading:!0,showModal:!0});const{request:d}=w.show(g??"","/publish");d.then(z=>{l({loading:!1,showModal:!1}),ie.push(e.jsx(ne,{title:"Successfully Published",type:"success",children:"Award has been successfully published to applicants/journalists"})),j()}).catch(z=>{l({loading:!1,showModal:!1}),ie.push(e.jsx(ne,{title:"Failed to Publish",type:"danger",children:"Award setup is incomplete, please finish setting up award and try again"})),console.log(z)})},I=()=>{a({...m,record:t,showModal:!0})},P=()=>{a({...m,record:null,showModal:!1})},A=()=>{var d;a({...m,loading:!0}),w.delete(((d=m.record)==null?void 0:d.uuid)??"").then(z=>{a({record:null,loading:!1,showModal:!1}),k("/award-management/awards"),ie.push(e.jsx(ne,{title:"Successfully Deleted",type:"success",children:"Award has been successfully deleted"}))}).catch(z=>{a({...m,loading:!1})})};return e.jsxs(de,{className:"w-full",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(Y,{variant:"plain",className:"flex items-center justify-center text-warning border-none hover:text-warning gap-2",onClick:M,children:[e.jsx(pe,{})," Edit"]})}),e.jsxs("div",{className:"flex flex-col xl:justify-between h-full 2xl:min-w-[360px] mx-auto",children:[e.jsx("div",{className:"flex xl:flex-col items-center gap-4 mt-6",children:e.jsx("h4",{className:"font-bold",children:"Award Details"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-y-7 gap-x-4 mt-10",children:[e.jsx(L,{title:"Title",value:t==null?void 0:t.title}),e.jsx(L,{title:"Description",value:t==null?void 0:t.description}),e.jsx(L,{title:"Start Date",value:R(t==null?void 0:t.startDate).format("DD MMM YYYY")}),e.jsx(L,{title:"End Date",value:R(t==null?void 0:t.endDate).format("DD MMM YYYY")}),e.jsx(L,{title:"Judge Access Start Date",value:R(t==null?void 0:t.judgeAccessStartDate).format("DD MMM YYYY")}),e.jsx(L,{title:"Judge Access End Date",value:R(t==null?void 0:t.judgeAccessEndDate).format("DD MMM YYYY")}),e.jsx(L,{title:"Published",value:t==null?void 0:t.isPublished}),e.jsx(L,{title:"Status",value:t==null?void 0:t.isActive})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-7",children:[(t==null?void 0:t.isPublished)==!1&&e.jsx(Y,{block:!0,customColorClass:()=>"text-success hover:border-success hover:ring-1 ring-success hover:text-success",icon:e.jsx(je,{}),onClick:()=>l({loading:!1,showModal:!0}),children:"Publish"}),e.jsx(Y,{block:!0,customColorClass:()=>"text-error hover:border-error hover:ring-1 ring-error hover:text-error",icon:e.jsx(we,{}),onClick:()=>I(),children:"Delete"})]}),e.jsxs(H,{isOpen:C.showModal,onClose:T,children:[e.jsx("h4",{className:"mb-4 text-center",children:"Update Award"}),e.jsxs(V,{onSubmit:v(B),children:[e.jsx(D,{label:"Title",invalid:!!x.title,errorMessage:(S=x.title)==null?void 0:S.message,children:e.jsx(y,{name:"title",control:h,render:({field:d})=>e.jsx(O,{type:"text",placeholder:"Title",autoComplete:"off",...d})})}),e.jsx(D,{label:"Description ",invalid:!!x.description,errorMessage:(N=x.description)==null?void 0:N.message,children:e.jsx(y,{name:"description",control:h,render:({field:d})=>e.jsx(O,{rows:4,type:"text",placeholder:"Description ",autoComplete:"off",...d,textArea:!0})})}),e.jsx(D,{label:"Start Date",invalid:!!x.startDate,errorMessage:(c=x.startDate)==null?void 0:c.message,children:e.jsx(y,{name:"startDate",control:h,render:({field:d})=>e.jsx(ae,{...d,inputFormat:"MMM, DD YYYY",value:d.value?new Date(d.value):void 0})})}),e.jsx(D,{label:"End Date",invalid:!!x.endDate,errorMessage:(s=x.endDate)==null?void 0:s.message,children:e.jsx(y,{name:"endDate",control:h,render:({field:d})=>e.jsx(ae,{...d,inputFormat:"MMM, DD YYYY",value:d.value?new Date(d.value):void 0})})}),e.jsx(D,{label:"Judge Access Start Date",invalid:!!x.judgeAccessStartDate,errorMessage:(r=x.judgeAccessStartDate)==null?void 0:r.message,children:e.jsx(y,{name:"judgeAccessStartDate",control:h,render:({field:d})=>e.jsx(ae,{...d,inputFormat:"MMM, DD YYYY",value:d.value?new Date(d.value):void 0})})}),e.jsx(D,{label:"Judge Access End Date",invalid:!!x.judgeAccessEndDate,errorMessage:(o=x.judgeAccessEndDate)==null?void 0:o.message,children:e.jsx(y,{name:"judgeAccessEndDate",control:h,render:({field:d})=>e.jsx(ae,{...d,inputFormat:"MMM, DD YYYY",value:d.value?new Date(d.value):void 0})})}),e.jsx(Y,{loading:C.loading,variant:"solid",type:"submit",children:"Update"})]})]}),e.jsx(_,{isOpen:n.showModal,type:"success",title:"Publish Award",confirmText:"Publish",cancelButtonProps:{variant:"solid",color:"default",customColorClass:()=>"text-dark bg-gray-200 hover:bg-default mr-3"},confirmButtonProps:{variant:"solid",color:"success",customColorClass:()=>"text-white bg-success hover:bg-success",loading:n.loading},onClose:()=>l({loading:!1,showModal:!1}),onCancel:()=>l({loading:!1,showModal:!1}),onConfirm:E,children:e.jsxs("p",{children:[" ","This action is irreversible! Publishing"," ",e.jsxs("span",{className:"font-semibold",children:[t==null?void 0:t.title," "]}),"award password will be visible to journalists/applicants Are you sure you want to proceed?"]})}),e.jsx(_,{isOpen:m.showModal,type:"danger",title:"Warning",confirmText:"Delete",cancelButtonProps:{variant:"solid",color:"default",customColorClass:()=>"text-dark bg-gray-200 hover:bg-default mr-3"},confirmButtonProps:{variant:"solid",color:"danger",customColorClass:()=>"text-white bg-error hover:bg-error",loading:m.loading},onClose:P,onCancel:P,onConfirm:A,children:e.jsxs("p",{children:[" ","This action is irreversible! Deleting"," ",e.jsxs("span",{className:"font-semibold",children:[(p=m.record)==null?void 0:p.title," "]}),"will permanently be removed from the system. Are you sure you want to proceed?"]})})]})]})},Me=q({number:F().trim().min(1,"Number of the instruction is required"),instruction:F().trim().min(1,"Instruction of the award is required")}),Ae=({uuid:g})=>{var S,N;const[t,j]=u.useState(!1),[k,C]=u.useState([]),[i,m]=u.useState({record:null,isCreate:!0,loading:!1,showModal:!1}),[a,n]=u.useState({record:null,loading:!1,showModal:!1}),{control:l,reset:f,handleSubmit:U,formState:{errors:h}}=W({resolver:K(Me)});u.useEffect(()=>{b()},[]);const b=()=>{j(!0);const{request:c,cancel:s}=w.list({page:1,perPage:1e5},`/instructions/${g}`);c.then(r=>{const o=r.data.data;C(o),j(!1)}).catch(r=>{j(!1),!(r instanceof J)&&console.log(r)})},v=()=>{f({number:"",instruction:""})},x=()=>{v(),m({...i,record:null,isCreate:!0,showModal:!0})},T=()=>{v(),m({...i,record:null,isCreate:!0,showModal:!1})},M=c=>{f({...c,number:c.number.toString()}),m({...i,record:c,isCreate:!1,showModal:!0})},B=c=>{if(m({...i,loading:!0}),i.isCreate){const s={...c,awardUuid:g};w.create(s,"/instruction").then(r=>{f(),m({record:null,loading:!1,isCreate:!0,showModal:!1}),b()}).catch(r=>{m({...i,loading:!1})})}else{const s={...c,uuid:i.record!=null?i.record.uuid:""};w.update(s,"/instruction").then(r=>{f(),m({record:null,loading:!1,isCreate:!0,showModal:!1}),b()}).catch(r=>{m({...i,loading:!1})})}},E=()=>{var c;n({...a,loading:!0}),w.delete(((c=a.record)==null?void 0:c.uuid)??"","/instruction").then(s=>{n({record:null,loading:!1,showModal:!1}),b()}).catch(s=>{n({...a,loading:!1})})},I=()=>{n({...a,record:null,showModal:!1})},P=c=>{n({...a,record:c,showModal:!0})},A=[{title:"S/n",dataIndex:"s_no",key:"s_no",render:(c,s,r)=>r+1},{title:"Number",dataIndex:"number",key:"number"},{title:"Instruction",dataIndex:"instruction",key:"instruction"},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:c=>R(c).format("DD MMM YYYY")},{title:"Action",dataIndex:"action",key:"action",render:(c,s)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx($,{wrapperClass:"flex",title:"View",children:e.jsx("span",{className:"cursor-pointer p-2 text-warning",onClick:()=>M(s),children:e.jsx(ue,{size:20})})}),e.jsx($,{wrapperClass:"flex",title:"Delete",children:e.jsx("span",{className:"cursor-pointer p-2 text-red-500 hover:text-red-500",onClick:()=>P(s),children:e.jsx(ee,{size:20})})})]})}];return e.jsx(X,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h4",{children:"Award Instructions"}),e.jsx(Y,{variant:"solid",icon:e.jsx(Z,{className:"text-xl"}),onClick:x,children:"Add new"})]}),e.jsx(re,{className:"mt-5",children:e.jsx(se,{span:24,children:e.jsx(te,{dataSource:k,columns:A,rowKey:"uuid",loading:t,pagination:!1})})}),e.jsxs(H,{isOpen:i.showModal,onClose:T,children:[e.jsx("h4",{className:"mb-4 text-center",children:i.isCreate?"Add Award Instruction":"Update Award Instruction"}),e.jsxs(V,{onSubmit:U(B),children:[e.jsx(D,{label:"Number",invalid:!!h.number,errorMessage:(S=h.number)==null?void 0:S.message,children:e.jsx(y,{name:"number",control:l,render:({field:c})=>e.jsx(O,{type:"number",placeholder:"Number",autoComplete:"off",...c})})}),e.jsx(D,{label:"Instruction",invalid:!!h.instruction,errorMessage:(N=h.instruction)==null?void 0:N.message,children:e.jsx(y,{name:"instruction",control:l,render:({field:c})=>e.jsx(O,{type:"text",placeholder:"Instruction",autoComplete:"off",textArea:!0,...c})})}),e.jsx(Y,{loading:i.loading,variant:"solid",type:"submit",children:i.isCreate?"Add":"Update"})]})]}),e.jsx(_,{isOpen:a.showModal,type:"danger",title:"Warning",confirmText:"Delete",cancelButtonProps:{variant:"solid",color:"default",customColorClass:()=>"text-dark bg-gray-200 hover:bg-default mr-3"},confirmButtonProps:{variant:"solid",color:"danger",customColorClass:()=>"text-white bg-error hover:bg-error",loading:a.loading},onClose:I,onCancel:I,onConfirm:E,children:e.jsxs("p",{children:[" ","This action is irreversible! Deleting this record will permanently remove it from the system. Are you sure you want to proceed?"]})})]})})},Se=q({category:q({label:F().min(1,"Category is required"),value:F().min(2,"Invalid category")})}),Ne=({uuid:g})=>{var c;const[t,j]=u.useState(!1),[k,C]=u.useState([]),[i,m]=u.useState([]),[a,n]=u.useState({record:null,isCreate:!0,loading:!1,showModal:!1}),[l,f]=u.useState({record:null,loading:!1,showModal:!1}),{control:U,reset:h,handleSubmit:b,formState:{errors:v}}=W({resolver:K(Se)});u.useEffect(()=>{x(),T()},[]);const x=()=>{j(!0);const{request:s,cancel:r}=w.list({page:1,perPage:1e5},`/categories/${g}`);s.then(o=>{const p=o.data.data;C(p),j(!1)}).catch(o=>{j(!1),!(o instanceof J)&&console.log(o)})},T=()=>{const{request:s,cancel:r}=be.list({page:1,perPage:1e5});s.then(o=>{const p=o.data.data;m(p!=null?p.map(d=>({label:d.name,value:d.uuid})):[])}).catch(o=>{o instanceof J||console.log(o)})},M=()=>{h({category:{}})},B=()=>{M(),n({...a,record:null,isCreate:!0,showModal:!0})},E=()=>{M(),n({...a,record:null,isCreate:!0,showModal:!1})},I=s=>{if(n({...a,loading:!0}),a.isCreate){const r={awardUuid:g,categoryUuid:s.category.value};w.create(r,"/category").then(o=>{h(),n({record:null,loading:!1,isCreate:!0,showModal:!1}),x()}).catch(o=>{n({...a,loading:!1})})}else{const r={uuid:a.record!=null?a.record.uuid:"",categoryUuid:s.category.value};w.update(r,"/category").then(o=>{h(),n({record:null,loading:!1,isCreate:!0,showModal:!1}),x()}).catch(o=>{n({...a,loading:!1})})}},P=()=>{var s;f({...l,loading:!0}),w.delete(((s=l.record)==null?void 0:s.uuid)??"","/category").then(r=>{f({record:null,loading:!1,showModal:!1}),x()}).catch(r=>{f({...l,loading:!1})})},A=()=>{f({...l,record:null,showModal:!1})},S=s=>{f({...l,record:s,showModal:!0})},N=[{title:"S/n",dataIndex:"s_no",key:"s_no",render:(s,r,o)=>o+1},{title:"Category",dataIndex:"category",key:"category",render:s=>s.name},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:s=>R(s).format("DD MMM YYYY")},{title:"Action",dataIndex:"action",key:"action",render:(s,r)=>e.jsx("div",{className:"flex gap-3",children:e.jsx($,{wrapperClass:"flex",title:"Delete",children:e.jsx("span",{className:"cursor-pointer p-2 text-red-500 hover:text-red-500",onClick:()=>S(r),children:e.jsx(ee,{size:20})})})})}];return e.jsx(X,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h4",{children:"Award Categories"}),e.jsx(Y,{variant:"solid",icon:e.jsx(Z,{className:"text-xl"}),onClick:B,children:"Add new"})]}),e.jsx(re,{className:"mt-5",children:e.jsx(se,{span:24,children:e.jsx(te,{dataSource:k,columns:N,rowKey:"uuid",loading:t,pagination:!1})})}),e.jsxs(H,{isOpen:a.showModal,onClose:E,children:[e.jsx("h4",{className:"mb-4 text-center",children:a.isCreate?"Add Award Category":"Update Award Category"}),e.jsxs(V,{onSubmit:b(I),children:[e.jsx(D,{label:"Category",invalid:!!v.category,errorMessage:(c=v.category)==null?void 0:c.message,children:e.jsx(y,{name:"category",control:U,render:({field:s})=>e.jsx(le,{placeholder:"Select Category",options:i,...s})})}),e.jsx(Y,{loading:a.loading,variant:"solid",type:"submit",children:a.isCreate?"Add":"Update"})]})]}),e.jsx(_,{isOpen:l.showModal,type:"danger",title:"Warning",confirmText:"Delete",cancelButtonProps:{variant:"solid",color:"default",customColorClass:()=>"text-dark bg-gray-200 hover:bg-default mr-3"},confirmButtonProps:{variant:"solid",color:"danger",customColorClass:()=>"text-white bg-error hover:bg-error",loading:l.loading},onClose:A,onCancel:A,onConfirm:P,children:e.jsxs("p",{children:[" ","This action is irreversible! Deleting this record will permanently remove it from the system. Are you sure you want to proceed?"]})})]})})},Ye=q({criteria:q({label:F().min(1,"Criteria is required"),value:F().min(2,"Invalid criteria")})}),ke=({uuid:g})=>{var c;const[t,j]=u.useState(!1),[k,C]=u.useState([]),[i,m]=u.useState([]),[a,n]=u.useState({record:null,isCreate:!0,loading:!1,showModal:!1}),[l,f]=u.useState({record:null,loading:!1,showModal:!1}),{control:U,reset:h,handleSubmit:b,formState:{errors:v}}=W({resolver:K(Ye)});u.useEffect(()=>{x(),T()},[]);const x=()=>{j(!0);const{request:s,cancel:r}=w.list({page:1,perPage:1e5},`/criterias/${g}`);s.then(o=>{const p=o.data.data;C(p),j(!1)}).catch(o=>{j(!1),!(o instanceof J)&&console.log(o)})},T=()=>{const{request:s,cancel:r}=ve.list({page:1,perPage:1e5});s.then(o=>{const p=o.data.data;m(p!=null?p.map(d=>({label:d.name,value:d.uuid})):[])}).catch(o=>{o instanceof J||console.log(o)})},M=()=>{h({criteria:{}})},B=()=>{M(),n({...a,record:null,isCreate:!0,showModal:!0})},E=()=>{M(),n({...a,record:null,isCreate:!0,showModal:!1})},I=s=>{if(n({...a,loading:!0}),a.isCreate){const r={awardUuid:g,criteriaUuid:s.criteria.value};w.create(r,"/criteria").then(o=>{h(),n({record:null,loading:!1,isCreate:!0,showModal:!1}),x()}).catch(o=>{n({...a,loading:!1})})}else{const r={uuid:a.record!=null?a.record.uuid:"",criteriaUuid:s.criteria.value};w.update(r,"/criteria").then(o=>{h(),n({record:null,loading:!1,isCreate:!0,showModal:!1}),x()}).catch(o=>{n({...a,loading:!1})})}},P=()=>{var s;f({...l,loading:!0}),w.delete(((s=l.record)==null?void 0:s.uuid)??"","/criteria").then(r=>{f({record:null,loading:!1,showModal:!1}),x()}).catch(r=>{f({...l,loading:!1})})},A=()=>{f({...l,record:null,showModal:!1})},S=s=>{f({...l,record:s,showModal:!0})},N=[{title:"S/n",dataIndex:"s_no",key:"s_no",render:(s,r,o)=>o+1},{title:"Criteria",dataIndex:"criteria",key:"criteria",render:s=>s.name},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:s=>R(s).format("DD MMM YYYY")},{title:"Action",dataIndex:"action",key:"action",render:(s,r)=>e.jsx("div",{className:"flex gap-3",children:e.jsx($,{wrapperClass:"flex",title:"Delete",children:e.jsx("span",{className:"cursor-pointer p-2 text-red-500 hover:text-red-500",onClick:()=>S(r),children:e.jsx(ee,{size:20})})})})}];return e.jsx(X,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h4",{children:"Award Criterias"}),e.jsx(Y,{variant:"solid",icon:e.jsx(Z,{className:"text-xl"}),onClick:B,children:"Add new"})]}),e.jsx(re,{className:"mt-5",children:e.jsx(se,{span:24,children:e.jsx(te,{dataSource:k,columns:N,rowKey:"uuid",loading:t,pagination:!1})})}),e.jsxs(H,{isOpen:a.showModal,onClose:E,children:[e.jsx("h4",{className:"mb-4 text-center",children:a.isCreate?"Add Award Criteria":"Update Award Criteria"}),e.jsxs(V,{onSubmit:b(I),children:[e.jsx(D,{label:"Criteria",invalid:!!v.criteria,errorMessage:(c=v.criteria)==null?void 0:c.message,children:e.jsx(y,{name:"criteria",control:U,render:({field:s})=>e.jsx(le,{placeholder:"Select Criteria",options:i,...s})})}),e.jsx(Y,{loading:a.loading,variant:"solid",type:"submit",children:a.isCreate?"Add":"Update"})]})]}),e.jsx(_,{isOpen:l.showModal,type:"danger",title:"Warning",confirmText:"Delete",cancelButtonProps:{variant:"solid",color:"default",customColorClass:()=>"text-dark bg-gray-200 hover:bg-default mr-3"},confirmButtonProps:{variant:"solid",color:"danger",customColorClass:()=>"text-white bg-error hover:bg-error",loading:l.loading},onClose:A,onCancel:A,onConfirm:P,children:e.jsxs("p",{children:[" ","This action is irreversible! Deleting this record will permanently remove it from the system. Are you sure you want to proceed?"]})})]})})},Ie=q({judge:q({label:F().min(1,"Judge is required"),value:F().min(2,"Invalid Judge")})}),Re=({uuid:g})=>{var c;const[t,j]=u.useState(!1),[k,C]=u.useState([]),[i,m]=u.useState([]),[a,n]=u.useState({record:null,isCreate:!0,loading:!1,showModal:!1}),[l,f]=u.useState({record:null,loading:!1,showModal:!1}),{control:U,reset:h,handleSubmit:b,formState:{errors:v}}=W({resolver:K(Ie)});u.useEffect(()=>{x(),T()},[]);const x=()=>{j(!0);const{request:s}=w.list({page:1,perPage:1e5},`/judges/${g}`);s.then(r=>{const o=r.data.data;C(o),j(!1)}).catch(r=>{r instanceof J||(console.log(r),j(!1))})},T=()=>{const{request:s}=De.list({page:1,perPage:1e5},"/judges");s.then(r=>{const o=r.data.data;m(o!=null?o.map(p=>({label:`${p.firstName} ${p.lastName}`,value:p.uuid})):[])}).catch(r=>{r instanceof J||console.log(r)})},M=()=>{h({judge:{}})},B=()=>{M(),n({...a,record:null,isCreate:!0,showModal:!0})},E=()=>{M(),n({...a,record:null,isCreate:!0,showModal:!1})},I=s=>{if(n({...a,loading:!0}),a.isCreate){const r={awardUuid:g,judgeUuid:s.judge.value};w.create(r,"/judge").then(o=>{h(),n({record:null,loading:!1,isCreate:!0,showModal:!1}),x()}).catch(o=>{n({...a,loading:!1})})}else{const r={uuid:a.record!=null?a.record.uuid:"",judgeUuid:s.judge.value};w.update(r,"/judge").then(o=>{h(),n({record:null,loading:!1,isCreate:!0,showModal:!1}),x()}).catch(o=>{n({...a,loading:!1})})}},P=()=>{var s;f({...l,loading:!0}),w.delete(((s=l.record)==null?void 0:s.uuid)??"","/judge").then(r=>{f({record:null,loading:!1,showModal:!1}),x()}).catch(r=>{f({...l,loading:!1})})},A=()=>{f({...l,record:null,showModal:!1})},S=s=>{f({...l,record:s,showModal:!0})},N=[{title:"S/n",dataIndex:"s_no",key:"s_no",render:(s,r,o)=>o+1},{title:"Judge",dataIndex:"judge",key:"judge",render:s=>`${(s==null?void 0:s.firstName)??"-"} ${(s==null?void 0:s.lastName)??""}`},{title:"Phone Number",dataIndex:"judge",key:"phone",render:s=>(s==null?void 0:s.phone)||"N/A"},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:s=>R(s).format("DD MMM YYYY")},{title:"Action",dataIndex:"action",key:"action",render:(s,r)=>e.jsx("div",{className:"flex gap-3",children:e.jsx($,{wrapperClass:"flex",title:"Delete",children:e.jsx("span",{className:"cursor-pointer p-2 text-red-500 hover:text-red-500",onClick:()=>S(r),children:e.jsx(ee,{size:20})})})})}];return e.jsx(X,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h4",{children:"Award Judges"}),e.jsx(Y,{variant:"solid",icon:e.jsx(Z,{className:"text-xl"}),onClick:B,children:"Add new"})]}),e.jsx(re,{className:"mt-5",children:e.jsx(se,{span:24,children:e.jsx(te,{dataSource:k,columns:N,rowKey:"uuid",loading:t,pagination:!1})})}),e.jsxs(H,{isOpen:a.showModal,onClose:E,children:[e.jsx("h4",{className:"mb-4 text-center",children:a.isCreate?"Add Award Judge":"Update Award Judge"}),e.jsxs(V,{onSubmit:b(I),children:[e.jsx(D,{label:"Judge",invalid:!!v.judge,errorMessage:(c=v.judge)==null?void 0:c.message,children:e.jsx(y,{name:"judge",control:U,render:({field:s})=>e.jsx(le,{placeholder:"Select Judge",options:i,...s})})}),e.jsx(Y,{loading:a.loading,variant:"solid",type:"submit",children:a.isCreate?"Add":"Update"})]})]}),e.jsx(_,{isOpen:l.showModal,type:"danger",title:"Warning",confirmText:"Delete",cancelButtonProps:{variant:"solid",color:"default",customColorClass:()=>"text-dark bg-gray-200 hover:bg-default mr-3"},confirmButtonProps:{variant:"solid",color:"danger",customColorClass:()=>"text-white bg-error hover:bg-error",loading:l.loading},onClose:A,onCancel:A,onConfirm:P,children:e.jsxs("p",{children:[" ","This action is irreversible! Deleting this record will permanently remove it from the system. Are you sure you want to proceed?"]})})]})})},Fe=q({name:F().trim().min(1,"Name of the round is required"),number:F().trim().min(1,"Number of the round is required"),score:F().trim().min(1,"Score of the round is required"),isFinal:q({label:F().min(1,"This field is required"),value:F().min(2,"Invalid value")})}),Pe=[{label:"Yes",value:"true"},{label:"No",value:"false"}],Te=({uuid:g})=>{var S,N,c,s;const[t,j]=u.useState(!1),[k,C]=u.useState([]),[i,m]=u.useState({record:null,isCreate:!0,loading:!1,showModal:!1}),[a,n]=u.useState({record:null,loading:!1,showModal:!1}),{control:l,reset:f,handleSubmit:U,formState:{errors:h}}=W({resolver:K(Fe)});u.useEffect(()=>{b()},[]);const b=()=>{j(!0);const{request:r,cancel:o}=w.list({page:1,perPage:1e5},`/rounds/${g}`);r.then(p=>{const d=p.data.data;C(d),j(!1)}).catch(p=>{j(!1),!(p instanceof J)&&console.log(p)})},v=()=>{f({name:"",number:"",score:"",isFinal:{}})},x=()=>{v(),m({...i,record:null,isCreate:!0,showModal:!0})},T=()=>{v(),m({...i,record:null,isCreate:!0,showModal:!1})},M=r=>{f({...r,number:r.number.toString(),score:r.score.toString(),isFinal:{label:r.isFinal?"Yes":"No",value:r.isFinal?"true":"false"}}),m({...i,record:r,isCreate:!1,showModal:!0})},B=r=>{if(m({...i,loading:!0}),i.isCreate){const o={...r,awardUuid:g,isFinal:r.isFinal.value=="true"};w.create(o,"/round").then(p=>{f(),m({record:null,loading:!1,isCreate:!0,showModal:!1}),b()}).catch(p=>{m({...i,loading:!1})})}else{const o={...r,uuid:i.record!=null?i.record.uuid:"",isFinal:r.isFinal.value=="true"};w.update(o,"/round").then(p=>{f(),m({record:null,loading:!1,isCreate:!0,showModal:!1}),b()}).catch(p=>{m({...i,loading:!1})})}},E=()=>{var r;n({...a,loading:!0}),w.delete(((r=a.record)==null?void 0:r.uuid)??"","/round").then(o=>{n({record:null,loading:!1,showModal:!1}),b()}).catch(o=>{n({...a,loading:!1})})},I=()=>{n({...a,record:null,showModal:!1})},P=r=>{n({...a,record:r,showModal:!0})},A=[{title:"S/n",dataIndex:"s_no",key:"s_no",render:(r,o,p)=>p+1},{title:"Name",dataIndex:"name",key:"name"},{title:"Number",dataIndex:"number",key:"number"},{title:"Score",dataIndex:"score",key:"score"},{title:"Is Final",dataIndex:"isFinal",key:"isFinal",render:r=>r?e.jsx(oe,{className:"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100 border-0 rounded",children:"Yes"}):e.jsx(oe,{className:"text-gray-600 bg-gray-200 dark:text-red-100 dark:bg-gray-500/20 border-0",children:"No"})},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:r=>R(r).format("DD MMM YYYY")},{title:"Action",dataIndex:"action",key:"action",render:(r,o)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx($,{wrapperClass:"flex",title:"View",children:e.jsx("span",{className:"cursor-pointer p-2 text-warning",onClick:()=>M(o),children:e.jsx(ue,{size:20})})}),e.jsx($,{wrapperClass:"flex",title:"Delete",children:e.jsx("span",{className:"cursor-pointer p-2 text-red-500 hover:text-red-500",onClick:()=>P(o),children:e.jsx(ee,{size:20})})})]})}];return e.jsx(X,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h4",{children:"Award Rounds"}),e.jsx(Y,{variant:"solid",icon:e.jsx(Z,{className:"text-xl"}),onClick:x,children:"Add new"})]}),e.jsx(re,{className:"mt-5",children:e.jsx(se,{span:24,children:e.jsx(te,{dataSource:k,columns:A,rowKey:"uuid",loading:t,pagination:!1})})}),e.jsxs(H,{isOpen:i.showModal,onClose:T,children:[e.jsx("h4",{className:"mb-4 text-center",children:i.isCreate?"Add Award Round":"Update Award Round"}),e.jsxs(V,{onSubmit:U(B),children:[e.jsx(D,{label:"Name",invalid:!!h.name,errorMessage:(S=h.name)==null?void 0:S.message,children:e.jsx(y,{name:"name",control:l,render:({field:r})=>e.jsx(O,{type:"text",placeholder:"Name",autoComplete:"off",...r})})}),e.jsx(D,{label:"Number",invalid:!!h.number,errorMessage:(N=h.number)==null?void 0:N.message,children:e.jsx(y,{name:"number",control:l,render:({field:r})=>e.jsx(O,{type:"number",placeholder:"Number",autoComplete:"off",...r})})}),e.jsx(D,{label:"Score",invalid:!!h.score,errorMessage:(c=h.score)==null?void 0:c.message,children:e.jsx(y,{name:"score",control:l,render:({field:r})=>e.jsx(O,{type:"number",placeholder:"Minimum score to be in this round",autoComplete:"off",...r})})}),e.jsx(D,{label:"Is this Round final",invalid:!!h.isFinal,errorMessage:(s=h.isFinal)==null?void 0:s.message,children:e.jsx(y,{name:"isFinal",control:l,render:({field:r})=>e.jsx(le,{placeholder:"Select Option",options:Pe,...r})})}),e.jsx(Y,{loading:i.loading,variant:"solid",type:"submit",children:i.isCreate?"Add":"Update"})]})]}),e.jsx(_,{isOpen:a.showModal,type:"danger",title:"Warning",confirmText:"Delete",cancelButtonProps:{variant:"solid",color:"default",customColorClass:()=>"text-dark bg-gray-200 hover:bg-default mr-3"},confirmButtonProps:{variant:"solid",color:"danger",customColorClass:()=>"text-white bg-error hover:bg-error",loading:a.loading},onClose:I,onCancel:I,onConfirm:E,children:e.jsxs("p",{children:[" ","This action is irreversible! Deleting this record will permanently remove it from the system. Are you sure you want to proceed?"]})})]})})},{TabNav:G,TabList:Be,TabContent:Q}=ce,Nr=()=>{const{uuid:g}=ge(),[t,j]=u.useState(null),[k,C]=u.useState(!1);u.useEffect(()=>{i()},[]);const i=()=>{C(!0);const{request:m,cancel:a}=w.show(g??"");m.then(n=>{if(n.data.data!=null){const l=n.data.data;j({uuid:l.uuid,title:l.title,description:l.description,startDate:l.startDate,endDate:l.endDate,judgeAccessStartDate:l.judgeAccessStartDate,judgeAccessEndDate:l.judgeAccessEndDate,instructions:l.instructions,isPublished:l.isPublished,isActive:l.isActive,createdAt:l.createdAt})}C(!1)}).catch(n=>{n instanceof J||console.log(n)})};return e.jsx(xe,{loading:k,children:!fe(t)&&e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[e.jsx("div",{className:"min-w-[330px] 2xl:min-w-[400px]",children:e.jsx(ye,{data:t,reloadFunc:i,uuid:g})}),e.jsx(de,{className:"w-full",children:e.jsxs(ce,{defaultValue:"instructions",children:[e.jsxs(Be,{children:[e.jsx(G,{value:"instructions",children:"Instructions"}),e.jsx(G,{value:"categories",children:"Categories"}),e.jsx(G,{value:"criterias",children:"Criteria"}),e.jsx(G,{value:"judges",children:"Judges"}),e.jsx(G,{value:"rounds",children:"Rounds"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx(Q,{value:"instructions",children:e.jsx(Ae,{uuid:g})}),e.jsx(Q,{value:"categories",children:e.jsx(Ne,{uuid:g})}),e.jsx(Q,{value:"criterias",children:e.jsx(ke,{uuid:g})}),e.jsx(Q,{value:"judges",children:e.jsx(Re,{uuid:g})}),e.jsx(Q,{value:"rounds",children:e.jsx(Te,{uuid:g})})]})]})})]})})};export{Nr as default};
